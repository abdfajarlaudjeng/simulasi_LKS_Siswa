<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Latihan Website Sekolah - Drag & Drop Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .drag-item {
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .drag-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .drag-item:active {
            cursor: grabbing;
            transform: rotate(2deg) scale(1.05);
        }
        
        .drag-item.dragging {
            opacity: 0.7;
            transform: rotate(3deg) scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            z-index: 1000;
        }
        
        .drop-zone {
            min-height: 60px;
            border: 2px dashed #e5e7eb;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .drop-zone.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
            border-style: solid;
            animation: pulse 1s infinite;
        }
        
        .drop-zone.drag-over::before {
            content: "üéØ Lepas komponen di sini!";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #3b82f6;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            z-index: 10;
            pointer-events: none;
        }
        
        .menu-item {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .menu-item:hover .delete-btn {
            opacity: 1;
        }
        
        .delete-btn {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .preview-frame {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: white;
        }
        
        .code-editor {
            font-family: 'Courier New', monospace;
            background: #1f2937;
            color: #f9fafb;
            border-radius: 8px;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .success-animation {
            animation: successPulse 0.6s ease-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="gradient-bg text-white py-6 px-4 shadow-lg">
        <div class="max-w-7xl mx-auto">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold">üè´ Dashboard Website Builder</h1>
                    <p class="text-blue-100 mt-1">Latihan Membuat Website Sekolah dengan Drag & Drop</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-white bg-opacity-20 px-4 py-2 rounded-lg">
                        <span class="text-sm">üë®‚Äçüéì Mode: Siswa</span>
                    </div>
                    <button onclick="saveProgress()" class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg font-semibold transition-colors">
                        üíæ Simpan Progress
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto p-4">
        <!-- Tutorial Panel -->
        <div id="tutorial-panel" class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r-lg">
            <div class="flex items-start space-x-3">
                <div class="text-2xl">üí°</div>
                <div>
                    <h3 class="font-bold text-blue-800 mb-2">Cara Menggunakan Builder:</h3>
                    <ol class="text-sm text-blue-700 space-y-1">
                        <li>1. Drag komponen dari panel kiri ke area "Menu Website"</li>
                        <li>2. Klik komponen untuk mengedit konten</li>
                        <li>3. Lihat preview real-time di panel kanan</li>
                        <li>4. Klik "Ekspor HTML" untuk menyimpan website</li>
                    </ol>
                </div>
                <button onclick="closeTutorial()" class="text-blue-500 hover:text-blue-700 ml-auto">‚úï</button>
            </div>
        </div>

        <div class="grid lg:grid-cols-12 gap-6">
            <!-- Left Panel - Components -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-xl shadow-lg p-6 sticky top-4">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üß©</span>
                        Komponen Website
                    </h2>
                    
                    <div class="space-y-3">
                        <!-- Header Component -->
                        <div class="drag-item bg-gradient-to-r from-blue-100 to-blue-200 p-3 rounded-lg border-2 border-blue-300" 
                             draggable="true" 
                             data-component="header"
                             onclick="addComponentClick('header')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üè†</span>
                                    <div>
                                        <div class="font-semibold text-sm">Header Sekolah</div>
                                        <div class="text-xs text-gray-600">Logo + Nama Sekolah</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>

                        <!-- Navigation Component -->
                        <div class="drag-item bg-gradient-to-r from-green-100 to-green-200 p-3 rounded-lg border-2 border-green-300" 
                             draggable="true" 
                             data-component="navigation"
                             onclick="addComponentClick('navigation')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üìã</span>
                                    <div>
                                        <div class="font-semibold text-sm">Menu Navigasi</div>
                                        <div class="text-xs text-gray-600">Menu utama website</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>

                        <!-- Hero Section -->
                        <div class="drag-item bg-gradient-to-r from-purple-100 to-purple-200 p-3 rounded-lg border-2 border-purple-300" 
                             draggable="true" 
                             data-component="hero"
                             onclick="addComponentClick('hero')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üåü</span>
                                    <div>
                                        <div class="font-semibold text-sm">Hero Section</div>
                                        <div class="text-xs text-gray-600">Banner utama</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>

                        <!-- About Section -->
                        <div class="drag-item bg-gradient-to-r from-yellow-100 to-yellow-200 p-3 rounded-lg border-2 border-yellow-300" 
                             draggable="true" 
                             data-component="about"
                             onclick="addComponentClick('about')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üìñ</span>
                                    <div>
                                        <div class="font-semibold text-sm">Tentang Sekolah</div>
                                        <div class="text-xs text-gray-600">Profil & sejarah</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>

                        <!-- News Section -->
                        <div class="drag-item bg-gradient-to-r from-red-100 to-red-200 p-3 rounded-lg border-2 border-red-300" 
                             draggable="true" 
                             data-component="news"
                             onclick="addComponentClick('news')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üì∞</span>
                                    <div>
                                        <div class="font-semibold text-sm">Berita Sekolah</div>
                                        <div class="text-xs text-gray-600">Artikel & pengumuman</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>

                        <!-- Gallery Section -->
                        <div class="drag-item bg-gradient-to-r from-pink-100 to-pink-200 p-3 rounded-lg border-2 border-pink-300" 
                             draggable="true" 
                             data-component="gallery"
                             onclick="addComponentClick('gallery')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üñºÔ∏è</span>
                                    <div>
                                        <div class="font-semibold text-sm">Galeri Foto</div>
                                        <div class="text-xs text-gray-600">Koleksi gambar</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>

                        <!-- Contact Section -->
                        <div class="drag-item bg-gradient-to-r from-teal-100 to-teal-200 p-3 rounded-lg border-2 border-teal-300" 
                             draggable="true" 
                             data-component="contact"
                             onclick="addComponentClick('contact')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üìû</span>
                                    <div>
                                        <div class="font-semibold text-sm">Kontak</div>
                                        <div class="text-xs text-gray-600">Informasi kontak</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>

                        <!-- Footer Section -->
                        <div class="drag-item bg-gradient-to-r from-gray-100 to-gray-200 p-3 rounded-lg border-2 border-gray-300" 
                             draggable="true" 
                             data-component="footer"
                             onclick="addComponentClick('footer')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-xl">üîó</span>
                                    <div>
                                        <div class="font-semibold text-sm">Footer</div>
                                        <div class="text-xs text-gray-600">Bagian bawah website</div>
                                    </div>
                                </div>
                                <button class="bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded text-xs font-medium transition-colors">
                                    + Tambah
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <h3 class="font-semibold text-gray-800 mb-3">‚ö° Aksi Cepat</h3>
                        <div class="space-y-2">
                            <button onclick="clearAll()" class="w-full bg-red-100 hover:bg-red-200 text-red-700 py-2 px-3 rounded-lg text-sm font-medium transition-colors">
                                üóëÔ∏è Hapus Semua
                            </button>
                            <button onclick="showTemplateModal()" class="w-full bg-blue-100 hover:bg-blue-200 text-blue-700 py-2 px-3 rounded-lg text-sm font-medium transition-colors">
                                üìã Pilih Template
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Middle Panel - Builder -->
            <div class="lg:col-span-5">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                            <span class="text-2xl mr-2">üèóÔ∏è</span>
                            Menu Website
                        </h2>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">Komponen: </span>
                            <span id="component-count" class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-semibold">0</span>
                        </div>
                    </div>

                    <!-- Drop Zone -->
                    <div id="drop-zone" class="drop-zone rounded-lg p-6 min-h-96 w-full">
                        <div id="empty-state" class="text-center text-gray-400 py-12 pointer-events-none">
                            <div class="text-6xl mb-4">üì±</div>
                            <h3 class="text-lg font-semibold mb-2">Mulai Membangun Website</h3>
                            <p class="text-sm">Drag komponen dari panel kiri ke sini untuk memulai</p>
                            <div class="mt-4 text-xs bg-blue-50 text-blue-600 px-3 py-2 rounded-lg inline-block">
                                üí° Tip: Buka Console (F12) untuk melihat debug info
                            </div>
                        </div>
                        
                        <div id="website-components" class="space-y-4 hidden min-h-20">
                            <!-- Components will be added here -->
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex items-center justify-between mt-6 pt-4 border-t border-gray-200">
                        <div class="flex items-center space-x-2">
                            <button onclick="previewWebsite()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                                üëÅÔ∏è Preview
                            </button>
                            <button onclick="exportHTML()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                                üíæ Ekspor HTML
                            </button>
                        </div>
                        <div class="text-sm text-gray-600">
                            <span id="last-saved">Belum disimpan</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Preview -->
            <div class="lg:col-span-4">
                <div class="bg-white rounded-xl shadow-lg p-6 sticky top-4">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-2xl mr-2">üëÅÔ∏è</span>
                        Live Preview
                    </h2>
                    
                    <div class="preview-frame h-96 overflow-y-auto p-4">
                        <div id="preview-content" class="text-center text-gray-400 py-12">
                            <div class="text-4xl mb-4">üñ•Ô∏è</div>
                            <p class="text-sm">Preview akan muncul di sini</p>
                        </div>
                    </div>

                    <!-- Preview Controls -->
                    <div class="mt-4 flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <button onclick="refreshPreview()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm transition-colors">
                                üîÑ Refresh
                            </button>
                            <button onclick="toggleResponsive()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm transition-colors">
                                üì± Mobile
                            </button>
                        </div>
                        <div class="text-xs text-gray-500">
                            Auto-update: <span class="text-green-600">ON</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 id="edit-modal-title" class="text-2xl font-bold text-gray-800">Edit Komponen</h3>
                    <button onclick="closeEditModal()" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
                </div>
                <div id="edit-modal-content">
                    <!-- Edit form will be loaded here -->
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button onclick="closeEditModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-lg transition-colors">
                        Batal
                    </button>
                    <button onclick="saveEdit()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                        Simpan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Template Selection Modal -->
    <div id="template-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800">üé® Pilih Template Website</h3>
                    <button onclick="closeTemplateModal()" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
                </div>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Template 1: Sekolah Dasar -->
                    <div class="template-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all" onclick="loadTemplate('elementary')">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üè´</div>
                            <h4 class="font-bold text-lg text-blue-800">Sekolah Dasar</h4>
                            <p class="text-sm text-blue-600">Template ceria untuk SD</p>
                        </div>
                        <div class="bg-white rounded-lg p-3 text-xs">
                            <div class="space-y-1">
                                <div class="bg-blue-200 h-2 rounded"></div>
                                <div class="bg-yellow-200 h-2 rounded w-3/4"></div>
                                <div class="bg-green-200 h-2 rounded w-1/2"></div>
                                <div class="bg-purple-200 h-2 rounded w-2/3"></div>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-xs">7 Komponen</span>
                        </div>
                    </div>

                    <!-- Template 2: SMP Modern -->
                    <div class="template-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all" onclick="loadTemplate('junior')">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üéì</div>
                            <h4 class="font-bold text-lg text-green-800">SMP Modern</h4>
                            <p class="text-sm text-green-600">Template profesional SMP</p>
                        </div>
                        <div class="bg-white rounded-lg p-3 text-xs">
                            <div class="space-y-1">
                                <div class="bg-green-300 h-2 rounded"></div>
                                <div class="bg-blue-300 h-2 rounded w-4/5"></div>
                                <div class="bg-purple-300 h-2 rounded w-3/5"></div>
                                <div class="bg-red-300 h-2 rounded w-3/4"></div>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <span class="bg-green-500 text-white px-3 py-1 rounded-full text-xs">8 Komponen</span>
                        </div>
                    </div>

                    <!-- Template 3: SMA Unggulan -->
                    <div class="template-card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all" onclick="loadTemplate('senior')">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üèÜ</div>
                            <h4 class="font-bold text-lg text-purple-800">SMA Unggulan</h4>
                            <p class="text-sm text-purple-600">Template prestasi SMA</p>
                        </div>
                        <div class="bg-white rounded-lg p-3 text-xs">
                            <div class="space-y-1">
                                <div class="bg-purple-300 h-2 rounded"></div>
                                <div class="bg-indigo-300 h-2 rounded w-5/6"></div>
                                <div class="bg-pink-300 h-2 rounded w-2/3"></div>
                                <div class="bg-blue-300 h-2 rounded w-4/5"></div>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <span class="bg-purple-500 text-white px-3 py-1 rounded-full text-xs">9 Komponen</span>
                        </div>
                    </div>

                    <!-- Template 4: Sekolah Islami -->
                    <div class="template-card bg-gradient-to-br from-teal-50 to-teal-100 border-2 border-teal-200 rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all" onclick="loadTemplate('islamic')">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üïå</div>
                            <h4 class="font-bold text-lg text-teal-800">Sekolah Islami</h4>
                            <p class="text-sm text-teal-600">Template bernuansa Islami</p>
                        </div>
                        <div class="bg-white rounded-lg p-3 text-xs">
                            <div class="space-y-1">
                                <div class="bg-teal-300 h-2 rounded"></div>
                                <div class="bg-emerald-300 h-2 rounded w-3/4"></div>
                                <div class="bg-cyan-300 h-2 rounded w-1/2"></div>
                                <div class="bg-green-300 h-2 rounded w-5/6"></div>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <span class="bg-teal-500 text-white px-3 py-1 rounded-full text-xs">8 Komponen</span>
                        </div>
                    </div>

                    <!-- Template 5: Sekolah Kejuruan -->
                    <div class="template-card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all" onclick="loadTemplate('vocational')">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üîß</div>
                            <h4 class="font-bold text-lg text-orange-800">SMK Teknik</h4>
                            <p class="text-sm text-orange-600">Template sekolah kejuruan</p>
                        </div>
                        <div class="bg-white rounded-lg p-3 text-xs">
                            <div class="space-y-1">
                                <div class="bg-orange-300 h-2 rounded"></div>
                                <div class="bg-red-300 h-2 rounded w-4/5"></div>
                                <div class="bg-yellow-300 h-2 rounded w-3/5"></div>
                                <div class="bg-pink-300 h-2 rounded w-2/3"></div>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-xs">10 Komponen</span>
                        </div>
                    </div>

                    <!-- Template 6: Sekolah Internasional -->
                    <div class="template-card bg-gradient-to-br from-indigo-50 to-indigo-100 border-2 border-indigo-200 rounded-xl p-4 cursor-pointer hover:shadow-lg transition-all" onclick="loadTemplate('international')">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üåç</div>
                            <h4 class="font-bold text-lg text-indigo-800">Sekolah Internasional</h4>
                            <p class="text-sm text-indigo-600">Template global & modern</p>
                        </div>
                        <div class="bg-white rounded-lg p-3 text-xs">
                            <div class="space-y-1">
                                <div class="bg-indigo-300 h-2 rounded"></div>
                                <div class="bg-blue-300 h-2 rounded w-5/6"></div>
                                <div class="bg-purple-300 h-2 rounded w-3/4"></div>
                                <div class="bg-pink-300 h-2 rounded w-4/5"></div>
                            </div>
                        </div>
                        <div class="mt-3 text-center">
                            <span class="bg-indigo-500 text-white px-3 py-1 rounded-full text-xs">11 Komponen</span>
                        </div>
                    </div>
                </div>

                <div class="mt-6 pt-4 border-t border-gray-200">
                    <div class="flex justify-between items-center">
                        <div class="text-sm text-gray-600">
                            üí° <strong>Tips:</strong> Template akan mengganti semua komponen yang ada
                        </div>
                        <button onclick="closeTemplateModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-lg transition-colors">
                            Batal
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="success-toast" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg hidden z-50">
        <div class="flex items-center space-x-2">
            <span class="text-xl">‚úÖ</span>
            <span id="toast-message">Berhasil disimpan!</span>
        </div>
    </div>

    <script>
        // Global variables
        let websiteComponents = [];
        let currentEditingComponent = null;
        let componentCounter = 0;

        // Component templates
        const componentTemplates = {
            header: {
                name: 'Header Sekolah',
                icon: 'üè†',
                html: `
                    <header class="bg-blue-600 text-white py-6">
                        <div class="container mx-auto px-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center text-blue-600 text-2xl font-bold">
                                        S
                                    </div>
                                    <div>
                                        <h1 class="text-2xl font-bold">[NAMA_SEKOLAH]</h1>
                                        <p class="text-blue-200">[MOTTO_SEKOLAH]</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                `,
                fields: {
                    nama_sekolah: 'SMP Negeri 1 Jakarta',
                    motto_sekolah: 'Cerdas, Berkarakter, Berprestasi'
                }
            },
            navigation: {
                name: 'Menu Navigasi',
                icon: 'üìã',
                html: `
                    <nav class="bg-white shadow-md">
                        <div class="container mx-auto px-4">
                            <div class="flex items-center justify-center py-4">
                                <ul class="flex space-x-8">
                                    <li><a href="#" class="text-gray-700 hover:text-blue-600 font-medium">[MENU_1]</a></li>
                                    <li><a href="#" class="text-gray-700 hover:text-blue-600 font-medium">[MENU_2]</a></li>
                                    <li><a href="#" class="text-gray-700 hover:text-blue-600 font-medium">[MENU_3]</a></li>
                                    <li><a href="#" class="text-gray-700 hover:text-blue-600 font-medium">[MENU_4]</a></li>
                                    <li><a href="#" class="text-gray-700 hover:text-blue-600 font-medium">[MENU_5]</a></li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                `,
                fields: {
                    menu_1: 'Beranda',
                    menu_2: 'Tentang',
                    menu_3: 'Berita',
                    menu_4: 'Galeri',
                    menu_5: 'Kontak'
                }
            },
            hero: {
                name: 'Hero Section',
                icon: 'üåü',
                html: `
                    <section class="bg-gradient-to-r from-blue-500 to-purple-600 text-white py-20">
                        <div class="container mx-auto px-4 text-center">
                            <h2 class="text-4xl md:text-6xl font-bold mb-6">[JUDUL_HERO]</h2>
                            <p class="text-xl mb-8 max-w-2xl mx-auto">[DESKRIPSI_HERO]</p>
                            <button class="bg-white text-blue-600 px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition-colors">
                                [TOMBOL_HERO]
                            </button>
                        </div>
                    </section>
                `,
                fields: {
                    judul_hero: 'Selamat Datang di Sekolah Kami',
                    deskripsi_hero: 'Tempat terbaik untuk mengembangkan potensi dan meraih prestasi gemilang',
                    tombol_hero: 'Pelajari Lebih Lanjut'
                }
            },
            about: {
                name: 'Tentang Sekolah',
                icon: 'üìñ',
                html: `
                    <section class="py-16 bg-gray-50">
                        <div class="container mx-auto px-4">
                            <div class="text-center mb-12">
                                <h2 class="text-3xl font-bold text-gray-800 mb-4">[JUDUL_ABOUT]</h2>
                                <p class="text-lg text-gray-600 max-w-3xl mx-auto">[DESKRIPSI_ABOUT]</p>
                            </div>
                            <div class="grid md:grid-cols-3 gap-8">
                                <div class="text-center">
                                    <div class="text-4xl mb-4">üéì</div>
                                    <h3 class="text-xl font-semibold mb-2">[FITUR_1]</h3>
                                    <p class="text-gray-600">[DESKRIPSI_FITUR_1]</p>
                                </div>
                                <div class="text-center">
                                    <div class="text-4xl mb-4">üë®‚Äçüè´</div>
                                    <h3 class="text-xl font-semibold mb-2">[FITUR_2]</h3>
                                    <p class="text-gray-600">[DESKRIPSI_FITUR_2]</p>
                                </div>
                                <div class="text-center">
                                    <div class="text-4xl mb-4">üèÜ</div>
                                    <h3 class="text-xl font-semibold mb-2">[FITUR_3]</h3>
                                    <p class="text-gray-600">[DESKRIPSI_FITUR_3]</p>
                                </div>
                            </div>
                        </div>
                    </section>
                `,
                fields: {
                    judul_about: 'Tentang Sekolah Kami',
                    deskripsi_about: 'Sekolah yang berkomitmen memberikan pendidikan berkualitas dengan fasilitas modern dan tenaga pengajar profesional.',
                    fitur_1: 'Kurikulum Modern',
                    deskripsi_fitur_1: 'Kurikulum yang disesuaikan dengan perkembangan zaman',
                    fitur_2: 'Guru Berkualitas',
                    deskripsi_fitur_2: 'Tenaga pengajar berpengalaman dan profesional',
                    fitur_3: 'Prestasi Gemilang',
                    deskripsi_fitur_3: 'Berbagai prestasi akademik dan non-akademik'
                }
            },
            news: {
                name: 'Berita Sekolah',
                icon: 'üì∞',
                html: `
                    <section class="py-16">
                        <div class="container mx-auto px-4">
                            <div class="text-center mb-12">
                                <h2 class="text-3xl font-bold text-gray-800 mb-4">[JUDUL_NEWS]</h2>
                                <p class="text-lg text-gray-600">[DESKRIPSI_NEWS]</p>
                            </div>
                            <div class="grid md:grid-cols-3 gap-8">
                                <article class="bg-white rounded-lg shadow-md overflow-hidden">
                                    <div class="h-48 bg-blue-200 flex items-center justify-center text-4xl">üìö</div>
                                    <div class="p-6">
                                        <h3 class="text-xl font-semibold mb-2">[BERITA_1]</h3>
                                        <p class="text-gray-600 text-sm mb-4">[TANGGAL_1]</p>
                                        <p class="text-gray-700">[RINGKASAN_1]</p>
                                    </div>
                                </article>
                                <article class="bg-white rounded-lg shadow-md overflow-hidden">
                                    <div class="h-48 bg-green-200 flex items-center justify-center text-4xl">üèÜ</div>
                                    <div class="p-6">
                                        <h3 class="text-xl font-semibold mb-2">[BERITA_2]</h3>
                                        <p class="text-gray-600 text-sm mb-4">[TANGGAL_2]</p>
                                        <p class="text-gray-700">[RINGKASAN_2]</p>
                                    </div>
                                </article>
                                <article class="bg-white rounded-lg shadow-md overflow-hidden">
                                    <div class="h-48 bg-purple-200 flex items-center justify-center text-4xl">üéâ</div>
                                    <div class="p-6">
                                        <h3 class="text-xl font-semibold mb-2">[BERITA_3]</h3>
                                        <p class="text-gray-600 text-sm mb-4">[TANGGAL_3]</p>
                                        <p class="text-gray-700">[RINGKASAN_3]</p>
                                    </div>
                                </article>
                            </div>
                        </div>
                    </section>
                `,
                fields: {
                    judul_news: 'Berita Terkini',
                    deskripsi_news: 'Informasi terbaru seputar kegiatan sekolah',
                    berita_1: 'Penerimaan Siswa Baru 2024',
                    tanggal_1: '15 Januari 2024',
                    ringkasan_1: 'Pendaftaran siswa baru telah dibuka dengan berbagai program unggulan.',
                    berita_2: 'Juara Olimpiade Matematika',
                    tanggal_2: '10 Januari 2024',
                    ringkasan_2: 'Siswa kami meraih juara 1 olimpiade matematika tingkat provinsi.',
                    berita_3: 'Festival Seni Budaya',
                    tanggal_3: '5 Januari 2024',
                    ringkasan_3: 'Acara tahunan festival seni budaya akan segera diselenggarakan.'
                }
            },
            gallery: {
                name: 'Galeri Foto',
                icon: 'üñºÔ∏è',
                html: `
                    <section class="py-16 bg-gray-50">
                        <div class="container mx-auto px-4">
                            <div class="text-center mb-12">
                                <h2 class="text-3xl font-bold text-gray-800 mb-4">[JUDUL_GALLERY]</h2>
                                <p class="text-lg text-gray-600">[DESKRIPSI_GALLERY]</p>
                            </div>
                            <div class="grid md:grid-cols-4 gap-4">
                                <div class="bg-blue-200 h-48 rounded-lg flex items-center justify-center text-4xl">üè´</div>
                                <div class="bg-green-200 h-48 rounded-lg flex items-center justify-center text-4xl">üìö</div>
                                <div class="bg-yellow-200 h-48 rounded-lg flex items-center justify-center text-4xl">üé®</div>
                                <div class="bg-purple-200 h-48 rounded-lg flex items-center justify-center text-4xl">‚öΩ</div>
                                <div class="bg-pink-200 h-48 rounded-lg flex items-center justify-center text-4xl">üé≠</div>
                                <div class="bg-indigo-200 h-48 rounded-lg flex items-center justify-center text-4xl">üî¨</div>
                                <div class="bg-red-200 h-48 rounded-lg flex items-center justify-center text-4xl">üéµ</div>
                                <div class="bg-teal-200 h-48 rounded-lg flex items-center justify-center text-4xl">üèÜ</div>
                            </div>
                        </div>
                    </section>
                `,
                fields: {
                    judul_gallery: 'Galeri Sekolah',
                    deskripsi_gallery: 'Dokumentasi kegiatan dan fasilitas sekolah'
                }
            },
            contact: {
                name: 'Kontak',
                icon: 'üìû',
                html: `
                    <section class="py-16">
                        <div class="container mx-auto px-4">
                            <div class="text-center mb-12">
                                <h2 class="text-3xl font-bold text-gray-800 mb-4">[JUDUL_CONTACT]</h2>
                                <p class="text-lg text-gray-600">[DESKRIPSI_CONTACT]</p>
                            </div>
                            <div class="grid md:grid-cols-2 gap-12">
                                <div>
                                    <h3 class="text-xl font-semibold mb-6">Informasi Kontak</h3>
                                    <div class="space-y-4">
                                        <div class="flex items-center space-x-3">
                                            <div class="text-2xl">üìç</div>
                                            <div>
                                                <div class="font-semibold">Alamat</div>
                                                <div class="text-gray-600">[ALAMAT]</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center space-x-3">
                                            <div class="text-2xl">üìû</div>
                                            <div>
                                                <div class="font-semibold">Telepon</div>
                                                <div class="text-gray-600">[TELEPON]</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center space-x-3">
                                            <div class="text-2xl">üìß</div>
                                            <div>
                                                <div class="font-semibold">Email</div>
                                                <div class="text-gray-600">[EMAIL]</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-semibold mb-6">Kirim Pesan</h3>
                                    <form class="space-y-4">
                                        <input type="text" placeholder="Nama Lengkap" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500">
                                        <input type="email" placeholder="Email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500">
                                        <textarea placeholder="Pesan" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"></textarea>
                                        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">Kirim Pesan</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </section>
                `,
                fields: {
                    judul_contact: 'Hubungi Kami',
                    deskripsi_contact: 'Jangan ragu untuk menghubungi kami',
                    alamat: 'Jl. Pendidikan No. 123, Jakarta Pusat',
                    telepon: '(021) 123-4567',
                    email: 'info@sekolah.sch.id'
                }
            },
            footer: {
                name: 'Footer',
                icon: 'üîó',
                html: `
                    <footer class="bg-gray-800 text-white py-12">
                        <div class="container mx-auto px-4">
                            <div class="grid md:grid-cols-4 gap-8">
                                <div>
                                    <h3 class="text-xl font-bold mb-4">[NAMA_SEKOLAH_FOOTER]</h3>
                                    <p class="text-gray-300">[DESKRIPSI_FOOTER]</p>
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-4">Menu Cepat</h4>
                                    <ul class="space-y-2 text-gray-300">
                                        <li><a href="#" class="hover:text-white">Beranda</a></li>
                                        <li><a href="#" class="hover:text-white">Tentang</a></li>
                                        <li><a href="#" class="hover:text-white">Berita</a></li>
                                        <li><a href="#" class="hover:text-white">Kontak</a></li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-4">Informasi</h4>
                                    <ul class="space-y-2 text-gray-300">
                                        <li>üìç [ALAMAT_FOOTER]</li>
                                        <li>üìû [TELEPON_FOOTER]</li>
                                        <li>üìß [EMAIL_FOOTER]</li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-4">Media Sosial</h4>
                                    <div class="flex space-x-4">
                                        <a href="#" class="text-2xl hover:text-blue-400">üìò</a>
                                        <a href="#" class="text-2xl hover:text-pink-400">üì∑</a>
                                        <a href="#" class="text-2xl hover:text-blue-300">üê¶</a>
                                        <a href="#" class="text-2xl hover:text-red-400">üì∫</a>
                                    </div>
                                </div>
                            </div>
                            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                                <p>&copy; 2024 [NAMA_SEKOLAH_FOOTER]. All rights reserved.</p>
                            </div>
                        </div>
                    </footer>
                `,
                fields: {
                    nama_sekolah_footer: 'SMP Negeri 1 Jakarta',
                    deskripsi_footer: 'Sekolah terdepan dalam memberikan pendidikan berkualitas untuk generasi masa depan.',
                    alamat_footer: 'Jl. Pendidikan No. 123',
                    telepon_footer: '(021) 123-4567',
                    email_footer: 'info@sekolah.sch.id'
                }
            }
        };

        // Initialize drag and drop
        document.addEventListener('DOMContentLoaded', function() {
            initializeDragAndDrop();
            updateComponentCount();
        });

        function initializeDragAndDrop() {
            const dragItems = document.querySelectorAll('.drag-item');
            const dropZone = document.getElementById('drop-zone');
            const websiteComponents = document.getElementById('website-components');

            dragItems.forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
            });

            // Add event listeners to both drop zone and website components area
            [dropZone, websiteComponents].forEach(zone => {
                if (zone) {
                    zone.addEventListener('dragover', handleDragOver);
                    zone.addEventListener('drop', handleDrop);
                    zone.addEventListener('dragenter', handleDragEnter);
                    zone.addEventListener('dragleave', handleDragLeave);
                }
            });
        }

        function handleDragStart(e) {
            const componentType = e.target.dataset.component || e.target.closest('[data-component]')?.dataset.component;
            
            if (componentType) {
                e.dataTransfer.setData('text/plain', componentType);
                e.target.classList.add('dragging');
                console.log('Drag started:', componentType);
                console.log('DataTransfer set with:', componentType);
            } else {
                console.error('No component type found for drag item');
                e.preventDefault();
            }
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            console.log('Drag ended');
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            if (!e.currentTarget.contains(e.relatedTarget)) {
                e.currentTarget.classList.remove('drag-over');
            }
        }

        function handleDrop(e) {
            e.preventDefault();
            e.stopPropagation();
            
            // Remove drag-over class from all possible drop zones
            const dropZone = document.getElementById('drop-zone');
            const websiteComponents = document.getElementById('website-components');
            
            dropZone.classList.remove('drag-over');
            if (websiteComponents) {
                websiteComponents.classList.remove('drag-over');
            }
            
            const componentType = e.dataTransfer.getData('text/plain');
            console.log('Dropped component:', componentType);
            console.log('Drop target:', e.currentTarget.id);
            console.log('Available components:', Object.keys(componentTemplates));
            
            if (componentType && componentTemplates[componentType]) {
                addComponent(componentType);
                console.log('Component added successfully');
            } else {
                console.error('Invalid component type:', componentType);
                showToast('Error: Komponen tidak valid!');
            }
        }

        function addComponent(componentType) {
            const template = componentTemplates[componentType];
            if (!template) return;

            const componentId = `component-${++componentCounter}`;
            const component = {
                id: componentId,
                type: componentType,
                name: template.name,
                icon: template.icon,
                fields: { ...template.fields }
            };

            websiteComponents.push(component);
            renderComponent(component);
            updatePreview();
            updateComponentCount();
            hideEmptyState();
            
            showToast(`${template.name} berhasil ditambahkan!`);
        }

        function addComponentClick(componentType) {
            console.log('Adding component via click:', componentType);
            addComponent(componentType);
        }

        function renderComponent(component) {
            const container = document.getElementById('website-components');
            const componentElement = document.createElement('div');
            componentElement.className = 'menu-item bg-gray-50 border-2 border-gray-200 rounded-lg p-4 fade-in';
            componentElement.dataset.componentId = component.id;
            
            componentElement.innerHTML = `
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">${component.icon}</span>
                        <div>
                            <div class="font-semibold text-gray-800">${component.name}</div>
                            <div class="text-sm text-gray-600">ID: ${component.id}</div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button onclick="editComponent('${component.id}')" class="bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded text-sm transition-colors">
                            ‚úèÔ∏è Edit
                        </button>
                        <button onclick="deleteComponent('${component.id}')" class="delete-btn bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-sm transition-colors">
                            üóëÔ∏è Hapus
                        </button>
                    </div>
                </div>
            `;
            
            container.appendChild(componentElement);
        }

        function editComponent(componentId) {
            const component = websiteComponents.find(c => c.id === componentId);
            if (!component) return;

            currentEditingComponent = component;
            const template = componentTemplates[component.type];
            
            document.getElementById('edit-modal-title').textContent = `Edit ${component.name}`;
            
            let formHTML = '<div class="space-y-4">';
            
            Object.keys(component.fields).forEach(fieldKey => {
                const fieldLabel = fieldKey.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                formHTML += `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">${fieldLabel}</label>
                        <input type="text" 
                               id="field-${fieldKey}" 
                               value="${component.fields[fieldKey]}" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500">
                    </div>
                `;
            });
            
            formHTML += '</div>';
            
            document.getElementById('edit-modal-content').innerHTML = formHTML;
            document.getElementById('edit-modal').classList.remove('hidden');
        }

        function saveEdit() {
            if (!currentEditingComponent) return;

            Object.keys(currentEditingComponent.fields).forEach(fieldKey => {
                const input = document.getElementById(`field-${fieldKey}`);
                if (input) {
                    currentEditingComponent.fields[fieldKey] = input.value;
                }
            });

            updatePreview();
            closeEditModal();
            showToast('Komponen berhasil diperbarui!');
        }

        function closeEditModal() {
            document.getElementById('edit-modal').classList.add('hidden');
            currentEditingComponent = null;
        }

        function deleteComponent(componentId) {
            if (confirm('Apakah Anda yakin ingin menghapus komponen ini?')) {
                websiteComponents = websiteComponents.filter(c => c.id !== componentId);
                
                const element = document.querySelector(`[data-component-id="${componentId}"]`);
                if (element) {
                    element.remove();
                }
                
                updatePreview();
                updateComponentCount();
                
                if (websiteComponents.length === 0) {
                    showEmptyState();
                }
                
                showToast('Komponen berhasil dihapus!');
            }
        }

        function updatePreview() {
            const previewContent = document.getElementById('preview-content');
            
            if (websiteComponents.length === 0) {
                previewContent.innerHTML = `
                    <div class="text-center text-gray-400 py-12">
                        <div class="text-4xl mb-4">üñ•Ô∏è</div>
                        <p class="text-sm">Preview akan muncul di sini</p>
                    </div>
                `;
                return;
            }

            let html = '<div class="space-y-0">';
            
            websiteComponents.forEach(component => {
                const template = componentTemplates[component.type];
                let componentHTML = template.html;
                
                // Replace placeholders with actual values
                Object.keys(component.fields).forEach(fieldKey => {
                    const placeholder = `[${fieldKey.toUpperCase()}]`;
                    componentHTML = componentHTML.replace(new RegExp(placeholder, 'g'), component.fields[fieldKey]);
                });
                
                html += componentHTML;
            });
            
            html += '</div>';
            previewContent.innerHTML = html;
        }

        function updateComponentCount() {
            document.getElementById('component-count').textContent = websiteComponents.length;
        }

        function hideEmptyState() {
            document.getElementById('empty-state').classList.add('hidden');
            document.getElementById('website-components').classList.remove('hidden');
        }

        function showEmptyState() {
            document.getElementById('empty-state').classList.remove('hidden');
            document.getElementById('website-components').classList.add('hidden');
        }

        function clearAll() {
            if (websiteComponents.length === 0) {
                showToast('Tidak ada komponen untuk dihapus!');
                return;
            }
            
            if (confirm('Apakah Anda yakin ingin menghapus semua komponen?')) {
                websiteComponents = [];
                document.getElementById('website-components').innerHTML = '';
                updatePreview();
                updateComponentCount();
                showEmptyState();
                showToast('Semua komponen berhasil dihapus!');
            }
        }

        // Template configurations
        const websiteTemplates = {
            elementary: {
                name: 'Sekolah Dasar',
                components: ['header', 'navigation', 'hero', 'about', 'news', 'gallery', 'footer'],
                customizations: {
                    header: {
                        nama_sekolah: 'SD Negeri Ceria 01',
                        motto_sekolah: 'Belajar dengan Gembira, Meraih Prestasi'
                    },
                    hero: {
                        judul_hero: 'Selamat Datang di SD Ceria!',
                        deskripsi_hero: 'Tempat terbaik untuk anak-anak belajar dan bermain dengan gembira',
                        tombol_hero: 'Bergabung Bersama Kami'
                    },
                    about: {
                        judul_about: 'Tentang SD Ceria',
                        deskripsi_about: 'Sekolah dasar yang mengutamakan pembelajaran menyenangkan dengan metode bermain sambil belajar.',
                        fitur_1: 'Pembelajaran Menyenangkan',
                        deskripsi_fitur_1: 'Metode belajar sambil bermain yang efektif',
                        fitur_2: 'Guru Sabar & Kreatif',
                        deskripsi_fitur_2: 'Tenaga pengajar yang memahami dunia anak',
                        fitur_3: 'Fasilitas Ramah Anak',
                        deskripsi_fitur_3: 'Lingkungan sekolah yang aman dan nyaman'
                    }
                }
            },
            junior: {
                name: 'SMP Modern',
                components: ['header', 'navigation', 'hero', 'about', 'news', 'gallery', 'contact', 'footer'],
                customizations: {
                    header: {
                        nama_sekolah: 'SMP Modern Nusantara',
                        motto_sekolah: 'Cerdas, Berkarakter, Berprestasi'
                    },
                    hero: {
                        judul_hero: 'Masa Depan Dimulai dari Sini',
                        deskripsi_hero: 'Mempersiapkan generasi muda yang siap menghadapi tantangan masa depan',
                        tombol_hero: 'Daftar Sekarang'
                    },
                    about: {
                        judul_about: 'SMP Modern Terdepan',
                        deskripsi_about: 'Sekolah menengah pertama dengan kurikulum modern dan fasilitas teknologi terkini.',
                        fitur_1: 'Kurikulum Digital',
                        deskripsi_fitur_1: 'Pembelajaran berbasis teknologi modern',
                        fitur_2: 'Guru Profesional',
                        deskripsi_fitur_2: 'Tenaga pengajar bersertifikat internasional',
                        fitur_3: 'Prestasi Gemilang',
                        deskripsi_fitur_3: 'Berbagai penghargaan tingkat nasional'
                    }
                }
            },
            senior: {
                name: 'SMA Unggulan',
                components: ['header', 'navigation', 'hero', 'about', 'news', 'gallery', 'contact', 'footer'],
                customizations: {
                    header: {
                        nama_sekolah: 'SMA Unggulan Prestasi',
                        motto_sekolah: 'Excellence in Education, Character in Action'
                    },
                    hero: {
                        judul_hero: 'Wujudkan Impian Universitas Terbaik',
                        deskripsi_hero: 'Persiapan terbaik menuju perguruan tinggi favorit dengan program unggulan',
                        tombol_hero: 'Info Pendaftaran'
                    },
                    about: {
                        judul_about: 'SMA Unggulan Terpercaya',
                        deskripsi_about: 'Sekolah menengah atas dengan track record terbaik dalam mengantarkan siswa ke PTN favorit.',
                        fitur_1: 'Program Olimpiade',
                        deskripsi_fitur_1: 'Pembinaan khusus untuk kompetisi sains',
                        fitur_2: 'Bimbingan UTBK',
                        deskripsi_fitur_2: 'Persiapan intensif masuk perguruan tinggi',
                        fitur_3: 'Beasiswa Prestasi',
                        deskripsi_fitur_3: 'Program beasiswa untuk siswa berprestasi'
                    }
                }
            },
            islamic: {
                name: 'Sekolah Islami',
                components: ['header', 'navigation', 'hero', 'about', 'news', 'gallery', 'contact', 'footer'],
                customizations: {
                    header: {
                        nama_sekolah: 'Madrasah Al-Hikmah',
                        motto_sekolah: 'Berilmu, Berakhlak, Berprestasi'
                    },
                    hero: {
                        judul_hero: 'Pendidikan Islami Terpadu',
                        deskripsi_hero: 'Memadukan ilmu agama dan umum untuk membentuk generasi Qur\'ani',
                        tombol_hero: 'Pelajari Program Kami'
                    },
                    about: {
                        judul_about: 'Madrasah Berkualitas',
                        deskripsi_about: 'Lembaga pendidikan Islam yang mengintegrasikan nilai-nilai agama dengan ilmu pengetahuan modern.',
                        fitur_1: 'Kurikulum Terpadu',
                        deskripsi_fitur_1: 'Perpaduan kurikulum nasional dan agama',
                        fitur_2: 'Tahfidz Al-Qur\'an',
                        deskripsi_fitur_2: 'Program hafalan Al-Qur\'an terintegrasi',
                        fitur_3: 'Akhlak Mulia',
                        deskripsi_fitur_3: 'Pembentukan karakter Islami yang kuat'
                    }
                }
            },
            vocational: {
                name: 'SMK Teknik',
                components: ['header', 'navigation', 'hero', 'about', 'news', 'gallery', 'contact', 'footer'],
                customizations: {
                    header: {
                        nama_sekolah: 'SMK Teknik Industri Nusantara',
                        motto_sekolah: 'Skilled, Professional, Ready to Work'
                    },
                    hero: {
                        judul_hero: 'Siap Kerja, Siap Wirausaha',
                        deskripsi_hero: 'Pendidikan kejuruan dengan standar industri untuk masa depan yang cerah',
                        tombol_hero: 'Lihat Jurusan'
                    },
                    about: {
                        judul_about: 'SMK Terdepan',
                        deskripsi_about: 'Sekolah menengah kejuruan dengan fasilitas workshop modern dan kerjasama industri.',
                        fitur_1: 'Praktek Industri',
                        deskripsi_fitur_1: 'Magang langsung di perusahaan mitra',
                        fitur_2: 'Sertifikasi Profesi',
                        deskripsi_fitur_2: 'Lulusan bersertifikat kompetensi',
                        fitur_3: 'Job Placement',
                        deskripsi_fitur_3: 'Jaminan penempatan kerja 95%'
                    }
                }
            },
            international: {
                name: 'Sekolah Internasional',
                components: ['header', 'navigation', 'hero', 'about', 'news', 'gallery', 'contact', 'footer'],
                customizations: {
                    header: {
                        nama_sekolah: 'Global International School',
                        motto_sekolah: 'Nurturing Global Citizens'
                    },
                    hero: {
                        judul_hero: 'World-Class Education',
                        deskripsi_hero: 'Preparing students for success in a globalized world with international curriculum',
                        tombol_hero: 'Explore Programs'
                    },
                    about: {
                        judul_about: 'International Excellence',
                        deskripsi_about: 'Premier international school offering Cambridge and IB curriculum with multicultural environment.',
                        fitur_1: 'Cambridge Curriculum',
                        deskripsi_fitur_1: 'Internationally recognized education system',
                        fitur_2: 'Native Teachers',
                        deskripsi_fitur_2: 'Qualified international educators',
                        fitur_3: 'Global Network',
                        deskripsi_fitur_3: 'Partnerships with schools worldwide'
                    }
                }
            }
        };

        function showTemplateModal() {
            document.getElementById('template-modal').classList.remove('hidden');
        }

        function closeTemplateModal() {
            document.getElementById('template-modal').classList.add('hidden');
        }

        function loadTemplate(templateType) {
            const template = websiteTemplates[templateType];
            if (!template) {
                showToast('Template tidak ditemukan!');
                return;
            }

            if (websiteComponents.length > 0) {
                if (!confirm(`Ini akan mengganti semua komponen dengan template "${template.name}". Lanjutkan?`)) {
                    return;
                }
            }
            
            // Clear existing components
            websiteComponents = [];
            document.getElementById('website-components').innerHTML = '';
            
            closeTemplateModal();
            
            // Load template components with customizations
            template.components.forEach((componentType, index) => {
                setTimeout(() => {
                    addComponent(componentType);
                    
                    // Apply customizations if available
                    if (template.customizations && template.customizations[componentType]) {
                        const component = websiteComponents[websiteComponents.length - 1];
                        Object.assign(component.fields, template.customizations[componentType]);
                        
                        // Update the rendered component
                        updatePreview();
                    }
                }, index * 300);
            });
            
            setTimeout(() => {
                updatePreview();
                updateComponentCount();
                hideEmptyState();
                showToast(`Template "${template.name}" berhasil dimuat!`);
            }, template.components.length * 300 + 500);
        }

        function previewWebsite() {
            if (websiteComponents.length === 0) {
                showToast('Tambahkan komponen terlebih dahulu!');
                return;
            }
            
            const fullHTML = generateFullHTML();
            const newWindow = window.open('', '_blank');
            newWindow.document.write(fullHTML);
            newWindow.document.close();
        }

        function exportHTML() {
            if (websiteComponents.length === 0) {
                showToast('Tambahkan komponen terlebih dahulu!');
                return;
            }
            
            const fullHTML = generateFullHTML();
            const blob = new Blob([fullHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'website-sekolah.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Website berhasil diekspor!');
            updateLastSaved();
        }

        function generateFullHTML() {
            let html = `<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Sekolah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .container { max-width: 1200px; }
    </style>
</head>
<body>
`;
            
            websiteComponents.forEach(component => {
                const template = componentTemplates[component.type];
                let componentHTML = template.html;
                
                Object.keys(component.fields).forEach(fieldKey => {
                    const placeholder = `[${fieldKey.toUpperCase()}]`;
                    componentHTML = componentHTML.replace(new RegExp(placeholder, 'g'), component.fields[fieldKey]);
                });
                
                html += componentHTML + '\n';
            });
            
            html += `
    <script>
        // Prevent form submissions from navigating
        document.addEventListener('DOMContentLoaded', function() {
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('Terima kasih! Pesan Anda telah dikirim.');
                });
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98a2e9d305a2fd89',t:'MTc1OTczMDE2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>`;
            
            return html;
        }

        function refreshPreview() {
            updatePreview();
            showToast('Preview berhasil diperbarui!');
        }

        function toggleResponsive() {
            const previewContent = document.getElementById('preview-content');
            previewContent.classList.toggle('max-w-sm');
            previewContent.classList.toggle('mx-auto');
            showToast('Mode responsive diubah!');
        }

        function saveProgress() {
            const data = {
                components: websiteComponents,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('website-builder-progress', JSON.stringify(data));
            updateLastSaved();
            showToast('Progress berhasil disimpan!');
        }

        function updateLastSaved() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('id-ID');
            document.getElementById('last-saved').textContent = `Terakhir disimpan: ${timeString}`;
        }

        function closeTutorial() {
            document.getElementById('tutorial-panel').style.display = 'none';
        }

        function showToast(message) {
            const toast = document.getElementById('success-toast');
            const messageElement = document.getElementById('toast-message');
            
            messageElement.textContent = message;
            toast.classList.remove('hidden');
            toast.classList.add('success-animation');
            
            setTimeout(() => {
                toast.classList.add('hidden');
                toast.classList.remove('success-animation');
            }, 3000);
        }

        // Load saved progress on page load
        document.addEventListener('DOMContentLoaded', function() {
            const saved = localStorage.getItem('website-builder-progress');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    if (data.components && data.components.length > 0) {
                        websiteComponents = data.components;
                        componentCounter = Math.max(...websiteComponents.map(c => parseInt(c.id.split('-')[1])));
                        
                        websiteComponents.forEach(component => {
                            renderComponent(component);
                        });
                        
                        updatePreview();
                        updateComponentCount();
                        hideEmptyState();
                        
                        const date = new Date(data.timestamp);
                        document.getElementById('last-saved').textContent = `Terakhir disimpan: ${date.toLocaleTimeString('id-ID')}`;
                    }
                } catch (e) {
                    console.error('Error loading saved progress:', e);
                }
            }
        });

        // Close modal when clicking outside
        document.getElementById('edit-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeEditModal();
            }
        });

        // Close template modal when clicking outside
        document.getElementById('template-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeTemplateModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 's':
                        e.preventDefault();
                        saveProgress();
                        break;
                    case 'e':
                        e.preventDefault();
                        exportHTML();
                        break;
                    case 'p':
                        e.preventDefault();
                        previewWebsite();
                        break;
                }
            }
        });
    </script>
</body>
</html>
